#include <stdio.h>
#include <stdlib.h>

void printArray(int* arr, int count) {
  for (int i=0 ; i<count ; i++) {
    printf("%d ", arr[i]);
  }
  printf("\n");
}

int findMax(int* arr, int count) {
  int max = 0;
  for (int i=0 ; i<count ; i++) {
    if (arr[i] > max) max = arr[i];
  }
  return max;
}

int countSort(int* arr, int count) {
  int* buffer = NULL;
  int max = findMax(arr, count);
  buffer = (int*) calloc(max + 1, sizeof(int));
  if (buffer == NULL) {
    printf("동적할당에 실패하였습니다.\n");
    return 0;
  }

  for (int i=0 ; i<count ; i++) {
    buffer[arr[i]]++;
  }

  int k = 0;
  for (int i=0 ; i<(max + 1) ; i++) {
    if (buffer[i] != 0) arr[k++] = i;
  }

  free(buffer);
  return 1;
}

int main() {
  int arr[] = { 5, 2, 4, 9, 7, 1, 10, 1024, 8, 6, 3, 100 };
  int count = (int)(sizeof(arr) / sizeof(arr[0]));
  printArray(arr, count);
  countSort(arr, count);
  printArray(arr, count);

  return 0;
}